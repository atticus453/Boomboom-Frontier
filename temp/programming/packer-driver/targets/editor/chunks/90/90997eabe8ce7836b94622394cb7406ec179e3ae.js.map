{"version":3,"sources":["file:///Users/joan/Desktop/%E6%B8%85%E5%A4%A7/%E8%BB%9F%E9%AB%94%E5%AF%A6%E9%A9%97%E8%A8%AD%E8%A8%88/Boomboom-Frontier/node_modules/@firebase/app/dist/index.cjs.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","_req1","_req2","_req3","url","define","exports","require","module","__filename","__dirname","Object","defineProperty","value","component","tslib","logger$1","util","idb","PlatformLoggerServiceImpl","container","prototype","getPlatformInfoString","providers","getProviders","map","provider","isVersionServiceProvider","service","getImmediate","concat","library","version","filter","logString","join","getComponent","type","name$p","version$1","logger","Logger","name$o","name$n","name$m","name$l","name$k","name$j","name$i","name$h","name$g","name$f","name$e","name$d","name$c","name$b","name$a","name$9","name$8","name$7","name$6","name$5","name$4","name$3","name$2","name$1","name","_a$1","DEFAULT_ENTRY_NAME","PLATFORM_LOG_STRING","_apps","Map","_serverApps","_components","_addComponent","app","addComponent","e","debug","_addOrOverwriteComponent","addOrOverwriteComponent","_registerComponent","e_1","_a","e_2","_b","componentName","has","set","_c","__values","values","_d","next","done","e_1_1","error","return","call","_e","_f","serverApp","e_2_1","_getProvider","heartbeatController","getProvider","optional","triggerHeartbeat","_removeServiceInstance","instanceIdentifier","clearInstance","_isFirebaseApp","obj","options","undefined","_isFirebaseServerApp","settings","_clearComponents","clear","ERRORS","ERROR_FACTORY","ErrorFactory","FirebaseAppImpl","config","_this","_isDeleted","_options","__assign","_config","_name","_automaticDataCollectionEnabled","automaticDataCollectionEnabled","_container","Component","get","checkDestroyed","val","enumerable","configurable","isDeleted","create","appName","FirebaseServerAppImpl","_super","__extends","serverConfig","apiKey","appImpl","_serverConfig","_finalizationRegistry","FinalizationRegistry","automaticCleanup","_refCount","incRefCount","releaseOnDeref","registerVersion","toJSON","register","decRefCount","deleteApp","SDK_VERSION","initializeApp","rawConfig","name_1","String","getDefaultAppConfig","existingApp","deepEqual","ComponentContainer","component$1","newApp","initializeServerApp","_serverAppConfig","isBrowser","appOptions","nameObj","hashCode","s","__spreadArray","__read","reduce","hash","c","Math","imul","charCodeAt","nameString","JSON","stringify","getApp","getApps","Array","from","__awaiter","cleanupProviders","firebaseServerApp","__generator","label","delete","Promise","all","sent","libraryKeyOrName","variant","libraryMismatch","match","versionMismatch","warning","push","warn","onLog","logCallback","setUserLogHandler","setLogLevel","logLevel","DB_NAME","DB_VERSION","STORE_NAME","dbPromise","getDbPromise","openDB","upgrade","db","oldVersion","createObjectStore","console","catch","originalErrorMessage","message","readHeartbeatsFromIndexedDB","tx","result","idbGetError","trys","transaction","objectStore","computeKey","FirebaseError","writeHeartbeatsToIndexedDB","heartbeatObject","put","appId","MAX_HEADER_BYTES","STORED_HEARTBEAT_RETENTION_MAX_MILLIS","HeartbeatServiceImpl","_heartbeatsCache","_storage","HeartbeatStorageImpl","_heartbeatsCachePromise","read","then","platformLogger","agent","date","getUTCDateString","heartbeats","lastSentHeartbeatDate","some","singleDateHeartbeat","hbTimestamp","Date","valueOf","now","overwrite","getHeartbeatsHeader","heartbeatsToSend","unsentEntries","headerString","length","extractHeartbeatsForHeader","base64urlEncodeWithoutPadding","today","toISOString","substring","heartbeatsCache","maxSize","slice","_loop_1","heartbeatEntry","find","hb","dates","countBytes","pop","heartbeatsCache_1","heartbeatsCache_1_1","state_1","_canUseIndexedDBPromise","runIndexedDBEnvironmentCheck","isIndexedDBAvailable","validateIndexedDBOpenable","canUseIndexedDB","idbHeartbeatObject","heartbeatsObject","existingHeartbeatsObject","add","registerCoreComponents","_DEFAULT_ENTRY_NAME","_cjsExports","___esModule","__esModule","_FirebaseError","_SDK_VERSION","__DEFAULT_ENTRY_NAME","__addComponent","__addOrOverwriteComponent","__apps","__clearComponents","__components","__getProvider","__isFirebaseApp","__isFirebaseServerApp","__registerComponent","__removeServiceInstance","__serverApps","_deleteApp","_getApp","_getApps","_initializeApp","_initializeServerApp","_onLog","_registerVersion","_setLogLevel"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from '@firebase/component';\nimport { __cjsMetaURL as _req0} from 'tslib';\nimport { __cjsMetaURL as _req1} from '@firebase/logger';\nimport { __cjsMetaURL as _req2} from '@firebase/util';\nimport { __cjsMetaURL as _req3} from 'idb';\nlet _cjsExports;\nlet ___esModule;\nlet _FirebaseError;\nlet _SDK_VERSION;\nlet __DEFAULT_ENTRY_NAME;\nlet __addComponent;\nlet __addOrOverwriteComponent;\nlet __apps;\nlet __clearComponents;\nlet __components;\nlet __getProvider;\nlet __isFirebaseApp;\nlet __isFirebaseServerApp;\nlet __registerComponent;\nlet __removeServiceInstance;\nlet __serverApps;\nlet _deleteApp;\nlet _getApp;\nlet _getApps;\nlet _initializeApp;\nlet _initializeServerApp;\nlet _onLog;\nlet _registerVersion;\nlet _setLogLevel;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n 'use strict';\n\n Object.defineProperty(exports, '__esModule', { value: true });\n\n var component = require('@firebase/component');\n var tslib = require('tslib');\n var logger$1 = require('@firebase/logger');\n var util = require('@firebase/util');\n var idb = require('idb');\n\n /**\r\n  * @license\r\n  * Copyright 2019 Google LLC\r\n  *\r\n  * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n  * you may not use this file except in compliance with the License.\r\n  * You may obtain a copy of the License at\r\n  *\r\n  *   http://www.apache.org/licenses/LICENSE-2.0\r\n  *\r\n  * Unless required by applicable law or agreed to in writing, software\r\n  * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  * See the License for the specific language governing permissions and\r\n  * limitations under the License.\r\n  */\r\n var PlatformLoggerServiceImpl = /** @class */ (function () {\r\n     function PlatformLoggerServiceImpl(container) {\r\n         this.container = container;\r\n     }\r\n     // In initial implementation, this will be called by installations on\r\n     // auth token refresh, and installations will send this string.\r\n     PlatformLoggerServiceImpl.prototype.getPlatformInfoString = function () {\r\n         var providers = this.container.getProviders();\r\n         // Loop through providers and get library/version pairs from any that are\r\n         // version components.\r\n         return providers\r\n             .map(function (provider) {\r\n             if (isVersionServiceProvider(provider)) {\r\n                 var service = provider.getImmediate();\r\n                 return \"\".concat(service.library, \"/\").concat(service.version);\r\n             }\r\n             else {\r\n                 return null;\r\n             }\r\n         })\r\n             .filter(function (logString) { return logString; })\r\n             .join(' ');\r\n     };\r\n     return PlatformLoggerServiceImpl;\r\n }());\r\n /**\r\n  *\r\n  * @param provider check if this provider provides a VersionService\r\n  *\r\n  * NOTE: Using Provider<'app-version'> is a hack to indicate that the provider\r\n  * provides VersionService. The provider is not necessarily a 'app-version'\r\n  * provider.\r\n  */\r\n function isVersionServiceProvider(provider) {\r\n     var component = provider.getComponent();\r\n     return (component === null || component === void 0 ? void 0 : component.type) === \"VERSION\" /* ComponentType.VERSION */;\r\n }\n\n var name$p = \"@firebase/app\";\n var version$1 = \"0.10.3\";\n\n /**\r\n  * @license\r\n  * Copyright 2019 Google LLC\r\n  *\r\n  * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n  * you may not use this file except in compliance with the License.\r\n  * You may obtain a copy of the License at\r\n  *\r\n  *   http://www.apache.org/licenses/LICENSE-2.0\r\n  *\r\n  * Unless required by applicable law or agreed to in writing, software\r\n  * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  * See the License for the specific language governing permissions and\r\n  * limitations under the License.\r\n  */\r\n var logger = new logger$1.Logger('@firebase/app');\n\n var name$o = \"@firebase/app-compat\";\n\n var name$n = \"@firebase/analytics-compat\";\n\n var name$m = \"@firebase/analytics\";\n\n var name$l = \"@firebase/app-check-compat\";\n\n var name$k = \"@firebase/app-check\";\n\n var name$j = \"@firebase/auth\";\n\n var name$i = \"@firebase/auth-compat\";\n\n var name$h = \"@firebase/database\";\n\n var name$g = \"@firebase/database-compat\";\n\n var name$f = \"@firebase/functions\";\n\n var name$e = \"@firebase/functions-compat\";\n\n var name$d = \"@firebase/installations\";\n\n var name$c = \"@firebase/installations-compat\";\n\n var name$b = \"@firebase/messaging\";\n\n var name$a = \"@firebase/messaging-compat\";\n\n var name$9 = \"@firebase/performance\";\n\n var name$8 = \"@firebase/performance-compat\";\n\n var name$7 = \"@firebase/remote-config\";\n\n var name$6 = \"@firebase/remote-config-compat\";\n\n var name$5 = \"@firebase/storage\";\n\n var name$4 = \"@firebase/storage-compat\";\n\n var name$3 = \"@firebase/firestore\";\n\n var name$2 = \"@firebase/vertexai-preview\";\n\n var name$1 = \"@firebase/firestore-compat\";\n\n var name = \"firebase\";\n var version = \"10.12.0\";\n\n /**\r\n  * @license\r\n  * Copyright 2019 Google LLC\r\n  *\r\n  * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n  * you may not use this file except in compliance with the License.\r\n  * You may obtain a copy of the License at\r\n  *\r\n  *   http://www.apache.org/licenses/LICENSE-2.0\r\n  *\r\n  * Unless required by applicable law or agreed to in writing, software\r\n  * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  * See the License for the specific language governing permissions and\r\n  * limitations under the License.\r\n  */\r\n var _a$1;\r\n /**\r\n  * The default app name\r\n  *\r\n  * @internal\r\n  */\r\n var DEFAULT_ENTRY_NAME = '[DEFAULT]';\r\n var PLATFORM_LOG_STRING = (_a$1 = {},\r\n     _a$1[name$p] = 'fire-core',\r\n     _a$1[name$o] = 'fire-core-compat',\r\n     _a$1[name$m] = 'fire-analytics',\r\n     _a$1[name$n] = 'fire-analytics-compat',\r\n     _a$1[name$k] = 'fire-app-check',\r\n     _a$1[name$l] = 'fire-app-check-compat',\r\n     _a$1[name$j] = 'fire-auth',\r\n     _a$1[name$i] = 'fire-auth-compat',\r\n     _a$1[name$h] = 'fire-rtdb',\r\n     _a$1[name$g] = 'fire-rtdb-compat',\r\n     _a$1[name$f] = 'fire-fn',\r\n     _a$1[name$e] = 'fire-fn-compat',\r\n     _a$1[name$d] = 'fire-iid',\r\n     _a$1[name$c] = 'fire-iid-compat',\r\n     _a$1[name$b] = 'fire-fcm',\r\n     _a$1[name$a] = 'fire-fcm-compat',\r\n     _a$1[name$9] = 'fire-perf',\r\n     _a$1[name$8] = 'fire-perf-compat',\r\n     _a$1[name$7] = 'fire-rc',\r\n     _a$1[name$6] = 'fire-rc-compat',\r\n     _a$1[name$5] = 'fire-gcs',\r\n     _a$1[name$4] = 'fire-gcs-compat',\r\n     _a$1[name$3] = 'fire-fst',\r\n     _a$1[name$1] = 'fire-fst-compat',\r\n     _a$1[name$2] = 'fire-vertex',\r\n     _a$1['fire-js'] = 'fire-js',\r\n     _a$1[name] = 'fire-js-all',\r\n     _a$1);\n\n /**\r\n  * @license\r\n  * Copyright 2019 Google LLC\r\n  *\r\n  * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n  * you may not use this file except in compliance with the License.\r\n  * You may obtain a copy of the License at\r\n  *\r\n  *   http://www.apache.org/licenses/LICENSE-2.0\r\n  *\r\n  * Unless required by applicable law or agreed to in writing, software\r\n  * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  * See the License for the specific language governing permissions and\r\n  * limitations under the License.\r\n  */\r\n /**\r\n  * @internal\r\n  */\r\n var _apps = new Map();\r\n /**\r\n  * @internal\r\n  */\r\n var _serverApps = new Map();\r\n /**\r\n  * Registered components.\r\n  *\r\n  * @internal\r\n  */\r\n // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n var _components = new Map();\r\n /**\r\n  * @param component - the component being added to this app's container\r\n  *\r\n  * @internal\r\n  */\r\n function _addComponent(app, component) {\r\n     try {\r\n         app.container.addComponent(component);\r\n     }\r\n     catch (e) {\r\n         logger.debug(\"Component \".concat(component.name, \" failed to register with FirebaseApp \").concat(app.name), e);\r\n     }\r\n }\r\n /**\r\n  *\r\n  * @internal\r\n  */\r\n function _addOrOverwriteComponent(app, component) {\r\n     app.container.addOrOverwriteComponent(component);\r\n }\r\n /**\r\n  *\r\n  * @param component - the component to register\r\n  * @returns whether or not the component is registered successfully\r\n  *\r\n  * @internal\r\n  */\r\n function _registerComponent(component) {\r\n     var e_1, _a, e_2, _b;\r\n     var componentName = component.name;\r\n     if (_components.has(componentName)) {\r\n         logger.debug(\"There were multiple attempts to register component \".concat(componentName, \".\"));\r\n         return false;\r\n     }\r\n     _components.set(componentName, component);\r\n     try {\r\n         // add the component to existing app instances\r\n         for (var _c = tslib.__values(_apps.values()), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n             var app = _d.value;\r\n             _addComponent(app, component);\r\n         }\r\n     }\r\n     catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n     finally {\r\n         try {\r\n             if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\r\n         }\r\n         finally { if (e_1) throw e_1.error; }\r\n     }\r\n     try {\r\n         for (var _e = tslib.__values(_serverApps.values()), _f = _e.next(); !_f.done; _f = _e.next()) {\r\n             var serverApp = _f.value;\r\n             _addComponent(serverApp, component);\r\n         }\r\n     }\r\n     catch (e_2_1) { e_2 = { error: e_2_1 }; }\r\n     finally {\r\n         try {\r\n             if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\r\n         }\r\n         finally { if (e_2) throw e_2.error; }\r\n     }\r\n     return true;\r\n }\r\n /**\r\n  *\r\n  * @param app - FirebaseApp instance\r\n  * @param name - service name\r\n  *\r\n  * @returns the provider for the service with the matching name\r\n  *\r\n  * @internal\r\n  */\r\n function _getProvider(app, name) {\r\n     var heartbeatController = app.container\r\n         .getProvider('heartbeat')\r\n         .getImmediate({ optional: true });\r\n     if (heartbeatController) {\r\n         void heartbeatController.triggerHeartbeat();\r\n     }\r\n     return app.container.getProvider(name);\r\n }\r\n /**\r\n  *\r\n  * @param app - FirebaseApp instance\r\n  * @param name - service name\r\n  * @param instanceIdentifier - service instance identifier in case the service supports multiple instances\r\n  *\r\n  * @internal\r\n  */\r\n function _removeServiceInstance(app, name, instanceIdentifier) {\r\n     if (instanceIdentifier === void 0) { instanceIdentifier = DEFAULT_ENTRY_NAME; }\r\n     _getProvider(app, name).clearInstance(instanceIdentifier);\r\n }\r\n /**\r\n  *\r\n  * @param obj - an object of type FirebaseApp or FirebaseOptions.\r\n  *\r\n  * @returns true if the provide object is of type FirebaseApp.\r\n  *\r\n  * @internal\r\n  */\r\n function _isFirebaseApp(obj) {\r\n     return obj.options !== undefined;\r\n }\r\n /**\r\n  *\r\n  * @param obj - an object of type FirebaseApp.\r\n  *\r\n  * @returns true if the provided object is of type FirebaseServerAppImpl.\r\n  *\r\n  * @internal\r\n  */\r\n function _isFirebaseServerApp(obj) {\r\n     return obj.settings !== undefined;\r\n }\r\n /**\r\n  * Test only\r\n  *\r\n  * @internal\r\n  */\r\n function _clearComponents() {\r\n     _components.clear();\r\n }\n\n /**\r\n  * @license\r\n  * Copyright 2019 Google LLC\r\n  *\r\n  * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n  * you may not use this file except in compliance with the License.\r\n  * You may obtain a copy of the License at\r\n  *\r\n  *   http://www.apache.org/licenses/LICENSE-2.0\r\n  *\r\n  * Unless required by applicable law or agreed to in writing, software\r\n  * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  * See the License for the specific language governing permissions and\r\n  * limitations under the License.\r\n  */\r\n var _a;\r\n var ERRORS = (_a = {},\r\n     _a[\"no-app\" /* AppError.NO_APP */] = \"No Firebase App '{$appName}' has been created - \" +\r\n         'call initializeApp() first',\r\n     _a[\"bad-app-name\" /* AppError.BAD_APP_NAME */] = \"Illegal App name: '{$appName}'\",\r\n     _a[\"duplicate-app\" /* AppError.DUPLICATE_APP */] = \"Firebase App named '{$appName}' already exists with different options or config\",\r\n     _a[\"app-deleted\" /* AppError.APP_DELETED */] = \"Firebase App named '{$appName}' already deleted\",\r\n     _a[\"server-app-deleted\" /* AppError.SERVER_APP_DELETED */] = 'Firebase Server App has been deleted',\r\n     _a[\"no-options\" /* AppError.NO_OPTIONS */] = 'Need to provide options, when not being deployed to hosting via source.',\r\n     _a[\"invalid-app-argument\" /* AppError.INVALID_APP_ARGUMENT */] = 'firebase.{$appName}() takes either no argument or a ' +\r\n         'Firebase App instance.',\r\n     _a[\"invalid-log-argument\" /* AppError.INVALID_LOG_ARGUMENT */] = 'First argument to `onLog` must be null or a function.',\r\n     _a[\"idb-open\" /* AppError.IDB_OPEN */] = 'Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.',\r\n     _a[\"idb-get\" /* AppError.IDB_GET */] = 'Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.',\r\n     _a[\"idb-set\" /* AppError.IDB_WRITE */] = 'Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.',\r\n     _a[\"idb-delete\" /* AppError.IDB_DELETE */] = 'Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.',\r\n     _a[\"finalization-registry-not-supported\" /* AppError.FINALIZATION_REGISTRY_NOT_SUPPORTED */] = 'FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.',\r\n     _a[\"invalid-server-app-environment\" /* AppError.INVALID_SERVER_APP_ENVIRONMENT */] = 'FirebaseServerApp is not for use in browser environments.',\r\n     _a);\r\n var ERROR_FACTORY = new util.ErrorFactory('app', 'Firebase', ERRORS);\n\n /**\r\n  * @license\r\n  * Copyright 2019 Google LLC\r\n  *\r\n  * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n  * you may not use this file except in compliance with the License.\r\n  * You may obtain a copy of the License at\r\n  *\r\n  *   http://www.apache.org/licenses/LICENSE-2.0\r\n  *\r\n  * Unless required by applicable law or agreed to in writing, software\r\n  * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  * See the License for the specific language governing permissions and\r\n  * limitations under the License.\r\n  */\r\n var FirebaseAppImpl = /** @class */ (function () {\r\n     function FirebaseAppImpl(options, config, container) {\r\n         var _this = this;\r\n         this._isDeleted = false;\r\n         this._options = tslib.__assign({}, options);\r\n         this._config = tslib.__assign({}, config);\r\n         this._name = config.name;\r\n         this._automaticDataCollectionEnabled =\r\n             config.automaticDataCollectionEnabled;\r\n         this._container = container;\r\n         this.container.addComponent(new component.Component('app', function () { return _this; }, \"PUBLIC\" /* ComponentType.PUBLIC */));\r\n     }\r\n     Object.defineProperty(FirebaseAppImpl.prototype, \"automaticDataCollectionEnabled\", {\r\n         get: function () {\r\n             this.checkDestroyed();\r\n             return this._automaticDataCollectionEnabled;\r\n         },\r\n         set: function (val) {\r\n             this.checkDestroyed();\r\n             this._automaticDataCollectionEnabled = val;\r\n         },\r\n         enumerable: false,\r\n         configurable: true\r\n     });\r\n     Object.defineProperty(FirebaseAppImpl.prototype, \"name\", {\r\n         get: function () {\r\n             this.checkDestroyed();\r\n             return this._name;\r\n         },\r\n         enumerable: false,\r\n         configurable: true\r\n     });\r\n     Object.defineProperty(FirebaseAppImpl.prototype, \"options\", {\r\n         get: function () {\r\n             this.checkDestroyed();\r\n             return this._options;\r\n         },\r\n         enumerable: false,\r\n         configurable: true\r\n     });\r\n     Object.defineProperty(FirebaseAppImpl.prototype, \"config\", {\r\n         get: function () {\r\n             this.checkDestroyed();\r\n             return this._config;\r\n         },\r\n         enumerable: false,\r\n         configurable: true\r\n     });\r\n     Object.defineProperty(FirebaseAppImpl.prototype, \"container\", {\r\n         get: function () {\r\n             return this._container;\r\n         },\r\n         enumerable: false,\r\n         configurable: true\r\n     });\r\n     Object.defineProperty(FirebaseAppImpl.prototype, \"isDeleted\", {\r\n         get: function () {\r\n             return this._isDeleted;\r\n         },\r\n         set: function (val) {\r\n             this._isDeleted = val;\r\n         },\r\n         enumerable: false,\r\n         configurable: true\r\n     });\r\n     /**\r\n      * This function will throw an Error if the App has already been deleted -\r\n      * use before performing API actions on the App.\r\n      */\r\n     FirebaseAppImpl.prototype.checkDestroyed = function () {\r\n         if (this.isDeleted) {\r\n             throw ERROR_FACTORY.create(\"app-deleted\" /* AppError.APP_DELETED */, { appName: this._name });\r\n         }\r\n     };\r\n     return FirebaseAppImpl;\r\n }());\n\n /**\r\n  * @license\r\n  * Copyright 2023 Google LLC\r\n  *\r\n  * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n  * you may not use this file except in compliance with the License.\r\n  * You may obtain a copy of the License at\r\n  *\r\n  *   http://www.apache.org/licenses/LICENSE-2.0\r\n  *\r\n  * Unless required by applicable law or agreed to in writing, software\r\n  * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  * See the License for the specific language governing permissions and\r\n  * limitations under the License.\r\n  */\r\n var FirebaseServerAppImpl = /** @class */ (function (_super) {\r\n     tslib.__extends(FirebaseServerAppImpl, _super);\r\n     function FirebaseServerAppImpl(options, serverConfig, name, container) {\r\n         var _this = this;\r\n         // Build configuration parameters for the FirebaseAppImpl base class.\r\n         var automaticDataCollectionEnabled = serverConfig.automaticDataCollectionEnabled !== undefined\r\n             ? serverConfig.automaticDataCollectionEnabled\r\n             : false;\r\n         // Create the FirebaseAppSettings object for the FirebaseAppImp constructor.\r\n         var config = {\r\n             name: name,\r\n             automaticDataCollectionEnabled: automaticDataCollectionEnabled\r\n         };\r\n         if (options.apiKey !== undefined) {\r\n             // Construct the parent FirebaseAppImp object.\r\n             _this = _super.call(this, options, config, container) || this;\r\n         }\r\n         else {\r\n             var appImpl = options;\r\n             _this = _super.call(this, appImpl.options, config, container) || this;\r\n         }\r\n         // Now construct the data for the FirebaseServerAppImpl.\r\n         _this._serverConfig = tslib.__assign({ automaticDataCollectionEnabled: automaticDataCollectionEnabled }, serverConfig);\r\n         _this._finalizationRegistry = new FinalizationRegistry(function () {\r\n             _this.automaticCleanup();\r\n         });\r\n         _this._refCount = 0;\r\n         _this.incRefCount(_this._serverConfig.releaseOnDeref);\r\n         // Do not retain a hard reference to the dref object, otherwise the FinalizationRegisry\r\n         // will never trigger.\r\n         _this._serverConfig.releaseOnDeref = undefined;\r\n         serverConfig.releaseOnDeref = undefined;\r\n         registerVersion(name$p, version$1, 'serverapp');\r\n         return _this;\r\n     }\r\n     FirebaseServerAppImpl.prototype.toJSON = function () {\r\n         return undefined;\r\n     };\r\n     Object.defineProperty(FirebaseServerAppImpl.prototype, \"refCount\", {\r\n         get: function () {\r\n             return this._refCount;\r\n         },\r\n         enumerable: false,\r\n         configurable: true\r\n     });\r\n     // Increment the reference count of this server app. If an object is provided, register it\r\n     // with the finalization registry.\r\n     FirebaseServerAppImpl.prototype.incRefCount = function (obj) {\r\n         if (this.isDeleted) {\r\n             return;\r\n         }\r\n         this._refCount++;\r\n         if (obj !== undefined) {\r\n             this._finalizationRegistry.register(obj, this);\r\n         }\r\n     };\r\n     // Decrement the reference count.\r\n     FirebaseServerAppImpl.prototype.decRefCount = function () {\r\n         if (this.isDeleted) {\r\n             return 0;\r\n         }\r\n         return --this._refCount;\r\n     };\r\n     // Invoked by the FinalizationRegistry callback to note that this app should go through its\r\n     // reference counts and delete itself if no reference count remain. The coordinating logic that\r\n     // handles this is in deleteApp(...).\r\n     FirebaseServerAppImpl.prototype.automaticCleanup = function () {\r\n         void deleteApp(this);\r\n     };\r\n     Object.defineProperty(FirebaseServerAppImpl.prototype, \"settings\", {\r\n         get: function () {\r\n             this.checkDestroyed();\r\n             return this._serverConfig;\r\n         },\r\n         enumerable: false,\r\n         configurable: true\r\n     });\r\n     /**\r\n      * This function will throw an Error if the App has already been deleted -\r\n      * use before performing API actions on the App.\r\n      */\r\n     FirebaseServerAppImpl.prototype.checkDestroyed = function () {\r\n         if (this.isDeleted) {\r\n             throw ERROR_FACTORY.create(\"server-app-deleted\" /* AppError.SERVER_APP_DELETED */);\r\n         }\r\n     };\r\n     return FirebaseServerAppImpl;\r\n }(FirebaseAppImpl));\n\n /**\r\n  * @license\r\n  * Copyright 2019 Google LLC\r\n  *\r\n  * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n  * you may not use this file except in compliance with the License.\r\n  * You may obtain a copy of the License at\r\n  *\r\n  *   http://www.apache.org/licenses/LICENSE-2.0\r\n  *\r\n  * Unless required by applicable law or agreed to in writing, software\r\n  * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  * See the License for the specific language governing permissions and\r\n  * limitations under the License.\r\n  */\r\n /**\r\n  * The current SDK version.\r\n  *\r\n  * @public\r\n  */\r\n var SDK_VERSION = version;\r\n function initializeApp(_options, rawConfig) {\r\n     var e_1, _a;\r\n     if (rawConfig === void 0) { rawConfig = {}; }\r\n     var options = _options;\r\n     if (typeof rawConfig !== 'object') {\r\n         var name_1 = rawConfig;\r\n         rawConfig = { name: name_1 };\r\n     }\r\n     var config = tslib.__assign({ name: DEFAULT_ENTRY_NAME, automaticDataCollectionEnabled: false }, rawConfig);\r\n     var name = config.name;\r\n     if (typeof name !== 'string' || !name) {\r\n         throw ERROR_FACTORY.create(\"bad-app-name\" /* AppError.BAD_APP_NAME */, {\r\n             appName: String(name)\r\n         });\r\n     }\r\n     options || (options = util.getDefaultAppConfig());\r\n     if (!options) {\r\n         throw ERROR_FACTORY.create(\"no-options\" /* AppError.NO_OPTIONS */);\r\n     }\r\n     var existingApp = _apps.get(name);\r\n     if (existingApp) {\r\n         // return the existing app if options and config deep equal the ones in the existing app.\r\n         if (util.deepEqual(options, existingApp.options) &&\r\n             util.deepEqual(config, existingApp.config)) {\r\n             return existingApp;\r\n         }\r\n         else {\r\n             throw ERROR_FACTORY.create(\"duplicate-app\" /* AppError.DUPLICATE_APP */, { appName: name });\r\n         }\r\n     }\r\n     var container = new component.ComponentContainer(name);\r\n     try {\r\n         for (var _b = tslib.__values(_components.values()), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n             var component$1 = _c.value;\r\n             container.addComponent(component$1);\r\n         }\r\n     }\r\n     catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n     finally {\r\n         try {\r\n             if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n         }\r\n         finally { if (e_1) throw e_1.error; }\r\n     }\r\n     var newApp = new FirebaseAppImpl(options, config, container);\r\n     _apps.set(name, newApp);\r\n     return newApp;\r\n }\r\n function initializeServerApp(_options, _serverAppConfig) {\r\n     var e_2, _a;\r\n     if (util.isBrowser()) {\r\n         // FirebaseServerApp isn't designed to be run in browsers.\r\n         throw ERROR_FACTORY.create(\"invalid-server-app-environment\" /* AppError.INVALID_SERVER_APP_ENVIRONMENT */);\r\n     }\r\n     if (_serverAppConfig.automaticDataCollectionEnabled === undefined) {\r\n         _serverAppConfig.automaticDataCollectionEnabled = false;\r\n     }\r\n     var appOptions;\r\n     if (_isFirebaseApp(_options)) {\r\n         appOptions = _options.options;\r\n     }\r\n     else {\r\n         appOptions = _options;\r\n     }\r\n     // Build an app name based on a hash of the configuration options.\r\n     var nameObj = tslib.__assign(tslib.__assign({}, _serverAppConfig), appOptions);\r\n     // However, Do not mangle the name based on releaseOnDeref, since it will vary between the\r\n     // construction of FirebaseServerApp instances. For example, if the object is the request headers.\r\n     if (nameObj.releaseOnDeref !== undefined) {\r\n         delete nameObj.releaseOnDeref;\r\n     }\r\n     var hashCode = function (s) {\r\n         return tslib.__spreadArray([], tslib.__read(s), false).reduce(function (hash, c) { return (Math.imul(31, hash) + c.charCodeAt(0)) | 0; }, 0);\r\n     };\r\n     if (_serverAppConfig.releaseOnDeref !== undefined) {\r\n         if (typeof FinalizationRegistry === 'undefined') {\r\n             throw ERROR_FACTORY.create(\"finalization-registry-not-supported\" /* AppError.FINALIZATION_REGISTRY_NOT_SUPPORTED */, {});\r\n         }\r\n     }\r\n     var nameString = '' + hashCode(JSON.stringify(nameObj));\r\n     var existingApp = _serverApps.get(nameString);\r\n     if (existingApp) {\r\n         existingApp.incRefCount(_serverAppConfig.releaseOnDeref);\r\n         return existingApp;\r\n     }\r\n     var container = new component.ComponentContainer(nameString);\r\n     try {\r\n         for (var _b = tslib.__values(_components.values()), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n             var component$1 = _c.value;\r\n             container.addComponent(component$1);\r\n         }\r\n     }\r\n     catch (e_2_1) { e_2 = { error: e_2_1 }; }\r\n     finally {\r\n         try {\r\n             if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n         }\r\n         finally { if (e_2) throw e_2.error; }\r\n     }\r\n     var newApp = new FirebaseServerAppImpl(appOptions, _serverAppConfig, nameString, container);\r\n     _serverApps.set(nameString, newApp);\r\n     return newApp;\r\n }\r\n /**\r\n  * Retrieves a {@link @firebase/app#FirebaseApp} instance.\r\n  *\r\n  * When called with no arguments, the default app is returned. When an app name\r\n  * is provided, the app corresponding to that name is returned.\r\n  *\r\n  * An exception is thrown if the app being retrieved has not yet been\r\n  * initialized.\r\n  *\r\n  * @example\r\n  * ```javascript\r\n  * // Return the default app\r\n  * const app = getApp();\r\n  * ```\r\n  *\r\n  * @example\r\n  * ```javascript\r\n  * // Return a named app\r\n  * const otherApp = getApp(\"otherApp\");\r\n  * ```\r\n  *\r\n  * @param name - Optional name of the app to return. If no name is\r\n  *   provided, the default is `\"[DEFAULT]\"`.\r\n  *\r\n  * @returns The app corresponding to the provided app name.\r\n  *   If no app name is provided, the default app is returned.\r\n  *\r\n  * @public\r\n  */\r\n function getApp(name) {\r\n     if (name === void 0) { name = DEFAULT_ENTRY_NAME; }\r\n     var app = _apps.get(name);\r\n     if (!app && name === DEFAULT_ENTRY_NAME && util.getDefaultAppConfig()) {\r\n         return initializeApp();\r\n     }\r\n     if (!app) {\r\n         throw ERROR_FACTORY.create(\"no-app\" /* AppError.NO_APP */, { appName: name });\r\n     }\r\n     return app;\r\n }\r\n /**\r\n  * A (read-only) array of all initialized apps.\r\n  * @public\r\n  */\r\n function getApps() {\r\n     return Array.from(_apps.values());\r\n }\r\n /**\r\n  * Renders this app unusable and frees the resources of all associated\r\n  * services.\r\n  *\r\n  * @example\r\n  * ```javascript\r\n  * deleteApp(app)\r\n  *   .then(function() {\r\n  *     console.log(\"App deleted successfully\");\r\n  *   })\r\n  *   .catch(function(error) {\r\n  *     console.log(\"Error deleting app:\", error);\r\n  *   });\r\n  * ```\r\n  *\r\n  * @public\r\n  */\r\n function deleteApp(app) {\r\n     return tslib.__awaiter(this, void 0, void 0, function () {\r\n         var cleanupProviders, name, firebaseServerApp;\r\n         return tslib.__generator(this, function (_a) {\r\n             switch (_a.label) {\r\n                 case 0:\r\n                     cleanupProviders = false;\r\n                     name = app.name;\r\n                     if (_apps.has(name)) {\r\n                         cleanupProviders = true;\r\n                         _apps.delete(name);\r\n                     }\r\n                     else if (_serverApps.has(name)) {\r\n                         firebaseServerApp = app;\r\n                         if (firebaseServerApp.decRefCount() <= 0) {\r\n                             _serverApps.delete(name);\r\n                             cleanupProviders = true;\r\n                         }\r\n                     }\r\n                     if (!cleanupProviders) return [3 /*break*/, 2];\r\n                     return [4 /*yield*/, Promise.all(app.container\r\n                             .getProviders()\r\n                             .map(function (provider) { return provider.delete(); }))];\r\n                 case 1:\r\n                     _a.sent();\r\n                     app.isDeleted = true;\r\n                     _a.label = 2;\r\n                 case 2: return [2 /*return*/];\r\n             }\r\n         });\r\n     });\r\n }\r\n /**\r\n  * Registers a library's name and version for platform logging purposes.\r\n  * @param library - Name of 1p or 3p library (e.g. firestore, angularfire)\r\n  * @param version - Current version of that library.\r\n  * @param variant - Bundle variant, e.g., node, rn, etc.\r\n  *\r\n  * @public\r\n  */\r\n function registerVersion(libraryKeyOrName, version, variant) {\r\n     var _a;\r\n     // TODO: We can use this check to whitelist strings when/if we set up\r\n     // a good whitelist system.\r\n     var library = (_a = PLATFORM_LOG_STRING[libraryKeyOrName]) !== null && _a !== void 0 ? _a : libraryKeyOrName;\r\n     if (variant) {\r\n         library += \"-\".concat(variant);\r\n     }\r\n     var libraryMismatch = library.match(/\\s|\\//);\r\n     var versionMismatch = version.match(/\\s|\\//);\r\n     if (libraryMismatch || versionMismatch) {\r\n         var warning = [\r\n             \"Unable to register library \\\"\".concat(library, \"\\\" with version \\\"\").concat(version, \"\\\":\")\r\n         ];\r\n         if (libraryMismatch) {\r\n             warning.push(\"library name \\\"\".concat(library, \"\\\" contains illegal characters (whitespace or \\\"/\\\")\"));\r\n         }\r\n         if (libraryMismatch && versionMismatch) {\r\n             warning.push('and');\r\n         }\r\n         if (versionMismatch) {\r\n             warning.push(\"version name \\\"\".concat(version, \"\\\" contains illegal characters (whitespace or \\\"/\\\")\"));\r\n         }\r\n         logger.warn(warning.join(' '));\r\n         return;\r\n     }\r\n     _registerComponent(new component.Component(\"\".concat(library, \"-version\"), function () { return ({ library: library, version: version }); }, \"VERSION\" /* ComponentType.VERSION */));\r\n }\r\n /**\r\n  * Sets log handler for all Firebase SDKs.\r\n  * @param logCallback - An optional custom log handler that executes user code whenever\r\n  * the Firebase SDK makes a logging call.\r\n  *\r\n  * @public\r\n  */\r\n function onLog(logCallback, options) {\r\n     if (logCallback !== null && typeof logCallback !== 'function') {\r\n         throw ERROR_FACTORY.create(\"invalid-log-argument\" /* AppError.INVALID_LOG_ARGUMENT */);\r\n     }\r\n     logger$1.setUserLogHandler(logCallback, options);\r\n }\r\n /**\r\n  * Sets log level for all Firebase SDKs.\r\n  *\r\n  * All of the log types above the current log level are captured (i.e. if\r\n  * you set the log level to `info`, errors are logged, but `debug` and\r\n  * `verbose` logs are not).\r\n  *\r\n  * @public\r\n  */\r\n function setLogLevel(logLevel) {\r\n     logger$1.setLogLevel(logLevel);\r\n }\n\n /**\r\n  * @license\r\n  * Copyright 2021 Google LLC\r\n  *\r\n  * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n  * you may not use this file except in compliance with the License.\r\n  * You may obtain a copy of the License at\r\n  *\r\n  *   http://www.apache.org/licenses/LICENSE-2.0\r\n  *\r\n  * Unless required by applicable law or agreed to in writing, software\r\n  * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  * See the License for the specific language governing permissions and\r\n  * limitations under the License.\r\n  */\r\n var DB_NAME = 'firebase-heartbeat-database';\r\n var DB_VERSION = 1;\r\n var STORE_NAME = 'firebase-heartbeat-store';\r\n var dbPromise = null;\r\n function getDbPromise() {\r\n     if (!dbPromise) {\r\n         dbPromise = idb.openDB(DB_NAME, DB_VERSION, {\r\n             upgrade: function (db, oldVersion) {\r\n                 // We don't use 'break' in this switch statement, the fall-through\r\n                 // behavior is what we want, because if there are multiple versions between\r\n                 // the old version and the current version, we want ALL the migrations\r\n                 // that correspond to those versions to run, not only the last one.\r\n                 // eslint-disable-next-line default-case\r\n                 switch (oldVersion) {\r\n                     case 0:\r\n                         try {\r\n                             db.createObjectStore(STORE_NAME);\r\n                         }\r\n                         catch (e) {\r\n                             // Safari/iOS browsers throw occasional exceptions on\r\n                             // db.createObjectStore() that may be a bug. Avoid blocking\r\n                             // the rest of the app functionality.\r\n                             console.warn(e);\r\n                         }\r\n                 }\r\n             }\r\n         }).catch(function (e) {\r\n             throw ERROR_FACTORY.create(\"idb-open\" /* AppError.IDB_OPEN */, {\r\n                 originalErrorMessage: e.message\r\n             });\r\n         });\r\n     }\r\n     return dbPromise;\r\n }\r\n function readHeartbeatsFromIndexedDB(app) {\r\n     return tslib.__awaiter(this, void 0, void 0, function () {\r\n         var db, tx, result, e_1, idbGetError;\r\n         return tslib.__generator(this, function (_a) {\r\n             switch (_a.label) {\r\n                 case 0:\r\n                     _a.trys.push([0, 4, , 5]);\r\n                     return [4 /*yield*/, getDbPromise()];\r\n                 case 1:\r\n                     db = _a.sent();\r\n                     tx = db.transaction(STORE_NAME);\r\n                     return [4 /*yield*/, tx.objectStore(STORE_NAME).get(computeKey(app))];\r\n                 case 2:\r\n                     result = _a.sent();\r\n                     // We already have the value but tx.done can throw,\r\n                     // so we need to await it here to catch errors\r\n                     return [4 /*yield*/, tx.done];\r\n                 case 3:\r\n                     // We already have the value but tx.done can throw,\r\n                     // so we need to await it here to catch errors\r\n                     _a.sent();\r\n                     return [2 /*return*/, result];\r\n                 case 4:\r\n                     e_1 = _a.sent();\r\n                     if (e_1 instanceof util.FirebaseError) {\r\n                         logger.warn(e_1.message);\r\n                     }\r\n                     else {\r\n                         idbGetError = ERROR_FACTORY.create(\"idb-get\" /* AppError.IDB_GET */, {\r\n                             originalErrorMessage: e_1 === null || e_1 === void 0 ? void 0 : e_1.message\r\n                         });\r\n                         logger.warn(idbGetError.message);\r\n                     }\r\n                     return [3 /*break*/, 5];\r\n                 case 5: return [2 /*return*/];\r\n             }\r\n         });\r\n     });\r\n }\r\n function writeHeartbeatsToIndexedDB(app, heartbeatObject) {\r\n     return tslib.__awaiter(this, void 0, void 0, function () {\r\n         var db, tx, objectStore, e_2, idbGetError;\r\n         return tslib.__generator(this, function (_a) {\r\n             switch (_a.label) {\r\n                 case 0:\r\n                     _a.trys.push([0, 4, , 5]);\r\n                     return [4 /*yield*/, getDbPromise()];\r\n                 case 1:\r\n                     db = _a.sent();\r\n                     tx = db.transaction(STORE_NAME, 'readwrite');\r\n                     objectStore = tx.objectStore(STORE_NAME);\r\n                     return [4 /*yield*/, objectStore.put(heartbeatObject, computeKey(app))];\r\n                 case 2:\r\n                     _a.sent();\r\n                     return [4 /*yield*/, tx.done];\r\n                 case 3:\r\n                     _a.sent();\r\n                     return [3 /*break*/, 5];\r\n                 case 4:\r\n                     e_2 = _a.sent();\r\n                     if (e_2 instanceof util.FirebaseError) {\r\n                         logger.warn(e_2.message);\r\n                     }\r\n                     else {\r\n                         idbGetError = ERROR_FACTORY.create(\"idb-set\" /* AppError.IDB_WRITE */, {\r\n                             originalErrorMessage: e_2 === null || e_2 === void 0 ? void 0 : e_2.message\r\n                         });\r\n                         logger.warn(idbGetError.message);\r\n                     }\r\n                     return [3 /*break*/, 5];\r\n                 case 5: return [2 /*return*/];\r\n             }\r\n         });\r\n     });\r\n }\r\n function computeKey(app) {\r\n     return \"\".concat(app.name, \"!\").concat(app.options.appId);\r\n }\n\n /**\r\n  * @license\r\n  * Copyright 2021 Google LLC\r\n  *\r\n  * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n  * you may not use this file except in compliance with the License.\r\n  * You may obtain a copy of the License at\r\n  *\r\n  *   http://www.apache.org/licenses/LICENSE-2.0\r\n  *\r\n  * Unless required by applicable law or agreed to in writing, software\r\n  * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  * See the License for the specific language governing permissions and\r\n  * limitations under the License.\r\n  */\r\n var MAX_HEADER_BYTES = 1024;\r\n // 30 days\r\n var STORED_HEARTBEAT_RETENTION_MAX_MILLIS = 30 * 24 * 60 * 60 * 1000;\r\n var HeartbeatServiceImpl = /** @class */ (function () {\r\n     function HeartbeatServiceImpl(container) {\r\n         var _this = this;\r\n         this.container = container;\r\n         /**\r\n          * In-memory cache for heartbeats, used by getHeartbeatsHeader() to generate\r\n          * the header string.\r\n          * Stores one record per date. This will be consolidated into the standard\r\n          * format of one record per user agent string before being sent as a header.\r\n          * Populated from indexedDB when the controller is instantiated and should\r\n          * be kept in sync with indexedDB.\r\n          * Leave public for easier testing.\r\n          */\r\n         this._heartbeatsCache = null;\r\n         var app = this.container.getProvider('app').getImmediate();\r\n         this._storage = new HeartbeatStorageImpl(app);\r\n         this._heartbeatsCachePromise = this._storage.read().then(function (result) {\r\n             _this._heartbeatsCache = result;\r\n             return result;\r\n         });\r\n     }\r\n     /**\r\n      * Called to report a heartbeat. The function will generate\r\n      * a HeartbeatsByUserAgent object, update heartbeatsCache, and persist it\r\n      * to IndexedDB.\r\n      * Note that we only store one heartbeat per day. So if a heartbeat for today is\r\n      * already logged, subsequent calls to this function in the same day will be ignored.\r\n      */\r\n     HeartbeatServiceImpl.prototype.triggerHeartbeat = function () {\r\n         var _a, _b;\r\n         return tslib.__awaiter(this, void 0, void 0, function () {\r\n             var platformLogger, agent, date, _c;\r\n             return tslib.__generator(this, function (_d) {\r\n                 switch (_d.label) {\r\n                     case 0:\r\n                         platformLogger = this.container\r\n                             .getProvider('platform-logger')\r\n                             .getImmediate();\r\n                         agent = platformLogger.getPlatformInfoString();\r\n                         date = getUTCDateString();\r\n                         if (!(((_a = this._heartbeatsCache) === null || _a === void 0 ? void 0 : _a.heartbeats) == null)) return [3 /*break*/, 2];\r\n                         _c = this;\r\n                         return [4 /*yield*/, this._heartbeatsCachePromise];\r\n                     case 1:\r\n                         _c._heartbeatsCache = _d.sent();\r\n                         // If we failed to construct a heartbeats cache, then return immediately.\r\n                         if (((_b = this._heartbeatsCache) === null || _b === void 0 ? void 0 : _b.heartbeats) == null) {\r\n                             return [2 /*return*/];\r\n                         }\r\n                         _d.label = 2;\r\n                     case 2:\r\n                         // Do not store a heartbeat if one is already stored for this day\r\n                         // or if a header has already been sent today.\r\n                         if (this._heartbeatsCache.lastSentHeartbeatDate === date ||\r\n                             this._heartbeatsCache.heartbeats.some(function (singleDateHeartbeat) { return singleDateHeartbeat.date === date; })) {\r\n                             return [2 /*return*/];\r\n                         }\r\n                         else {\r\n                             // There is no entry for this date. Create one.\r\n                             this._heartbeatsCache.heartbeats.push({ date: date, agent: agent });\r\n                         }\r\n                         // Remove entries older than 30 days.\r\n                         this._heartbeatsCache.heartbeats = this._heartbeatsCache.heartbeats.filter(function (singleDateHeartbeat) {\r\n                             var hbTimestamp = new Date(singleDateHeartbeat.date).valueOf();\r\n                             var now = Date.now();\r\n                             return now - hbTimestamp <= STORED_HEARTBEAT_RETENTION_MAX_MILLIS;\r\n                         });\r\n                         return [2 /*return*/, this._storage.overwrite(this._heartbeatsCache)];\r\n                 }\r\n             });\r\n         });\r\n     };\r\n     /**\r\n      * Returns a base64 encoded string which can be attached to the heartbeat-specific header directly.\r\n      * It also clears all heartbeats from memory as well as in IndexedDB.\r\n      *\r\n      * NOTE: Consuming product SDKs should not send the header if this method\r\n      * returns an empty string.\r\n      */\r\n     HeartbeatServiceImpl.prototype.getHeartbeatsHeader = function () {\r\n         var _a;\r\n         return tslib.__awaiter(this, void 0, void 0, function () {\r\n             var date, _b, heartbeatsToSend, unsentEntries, headerString;\r\n             return tslib.__generator(this, function (_c) {\r\n                 switch (_c.label) {\r\n                     case 0:\r\n                         if (!(this._heartbeatsCache === null)) return [3 /*break*/, 2];\r\n                         return [4 /*yield*/, this._heartbeatsCachePromise];\r\n                     case 1:\r\n                         _c.sent();\r\n                         _c.label = 2;\r\n                     case 2:\r\n                         // If it's still null or the array is empty, there is no data to send.\r\n                         if (((_a = this._heartbeatsCache) === null || _a === void 0 ? void 0 : _a.heartbeats) == null ||\r\n                             this._heartbeatsCache.heartbeats.length === 0) {\r\n                             return [2 /*return*/, ''];\r\n                         }\r\n                         date = getUTCDateString();\r\n                         _b = extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats), heartbeatsToSend = _b.heartbeatsToSend, unsentEntries = _b.unsentEntries;\r\n                         headerString = util.base64urlEncodeWithoutPadding(JSON.stringify({ version: 2, heartbeats: heartbeatsToSend }));\r\n                         // Store last sent date to prevent another being logged/sent for the same day.\r\n                         this._heartbeatsCache.lastSentHeartbeatDate = date;\r\n                         if (!(unsentEntries.length > 0)) return [3 /*break*/, 4];\r\n                         // Store any unsent entries if they exist.\r\n                         this._heartbeatsCache.heartbeats = unsentEntries;\r\n                         // This seems more likely than emptying the array (below) to lead to some odd state\r\n                         // since the cache isn't empty and this will be called again on the next request,\r\n                         // and is probably safest if we await it.\r\n                         return [4 /*yield*/, this._storage.overwrite(this._heartbeatsCache)];\r\n                     case 3:\r\n                         // This seems more likely than emptying the array (below) to lead to some odd state\r\n                         // since the cache isn't empty and this will be called again on the next request,\r\n                         // and is probably safest if we await it.\r\n                         _c.sent();\r\n                         return [3 /*break*/, 5];\r\n                     case 4:\r\n                         this._heartbeatsCache.heartbeats = [];\r\n                         // Do not wait for this, to reduce latency.\r\n                         void this._storage.overwrite(this._heartbeatsCache);\r\n                         _c.label = 5;\r\n                     case 5: return [2 /*return*/, headerString];\r\n                 }\r\n             });\r\n         });\r\n     };\r\n     return HeartbeatServiceImpl;\r\n }());\r\n function getUTCDateString() {\r\n     var today = new Date();\r\n     // Returns date format 'YYYY-MM-DD'\r\n     return today.toISOString().substring(0, 10);\r\n }\r\n function extractHeartbeatsForHeader(heartbeatsCache, maxSize) {\r\n     var e_1, _a;\r\n     if (maxSize === void 0) { maxSize = MAX_HEADER_BYTES; }\r\n     // Heartbeats grouped by user agent in the standard format to be sent in\r\n     // the header.\r\n     var heartbeatsToSend = [];\r\n     // Single date format heartbeats that are not sent.\r\n     var unsentEntries = heartbeatsCache.slice();\r\n     var _loop_1 = function (singleDateHeartbeat) {\r\n         // Look for an existing entry with the same user agent.\r\n         var heartbeatEntry = heartbeatsToSend.find(function (hb) { return hb.agent === singleDateHeartbeat.agent; });\r\n         if (!heartbeatEntry) {\r\n             // If no entry for this user agent exists, create one.\r\n             heartbeatsToSend.push({\r\n                 agent: singleDateHeartbeat.agent,\r\n                 dates: [singleDateHeartbeat.date]\r\n             });\r\n             if (countBytes(heartbeatsToSend) > maxSize) {\r\n                 // If the header would exceed max size, remove the added heartbeat\r\n                 // entry and stop adding to the header.\r\n                 heartbeatsToSend.pop();\r\n                 return \"break\";\r\n             }\r\n         }\r\n         else {\r\n             heartbeatEntry.dates.push(singleDateHeartbeat.date);\r\n             // If the header would exceed max size, remove the added date\r\n             // and stop adding to the header.\r\n             if (countBytes(heartbeatsToSend) > maxSize) {\r\n                 heartbeatEntry.dates.pop();\r\n                 return \"break\";\r\n             }\r\n         }\r\n         // Pop unsent entry from queue. (Skipped if adding the entry exceeded\r\n         // quota and the loop breaks early.)\r\n         unsentEntries = unsentEntries.slice(1);\r\n     };\r\n     try {\r\n         for (var heartbeatsCache_1 = tslib.__values(heartbeatsCache), heartbeatsCache_1_1 = heartbeatsCache_1.next(); !heartbeatsCache_1_1.done; heartbeatsCache_1_1 = heartbeatsCache_1.next()) {\r\n             var singleDateHeartbeat = heartbeatsCache_1_1.value;\r\n             var state_1 = _loop_1(singleDateHeartbeat);\r\n             if (state_1 === \"break\")\r\n                 break;\r\n         }\r\n     }\r\n     catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n     finally {\r\n         try {\r\n             if (heartbeatsCache_1_1 && !heartbeatsCache_1_1.done && (_a = heartbeatsCache_1.return)) _a.call(heartbeatsCache_1);\r\n         }\r\n         finally { if (e_1) throw e_1.error; }\r\n     }\r\n     return {\r\n         heartbeatsToSend: heartbeatsToSend,\r\n         unsentEntries: unsentEntries\r\n     };\r\n }\r\n var HeartbeatStorageImpl = /** @class */ (function () {\r\n     function HeartbeatStorageImpl(app) {\r\n         this.app = app;\r\n         this._canUseIndexedDBPromise = this.runIndexedDBEnvironmentCheck();\r\n     }\r\n     HeartbeatStorageImpl.prototype.runIndexedDBEnvironmentCheck = function () {\r\n         return tslib.__awaiter(this, void 0, void 0, function () {\r\n             return tslib.__generator(this, function (_a) {\r\n                 if (!util.isIndexedDBAvailable()) {\r\n                     return [2 /*return*/, false];\r\n                 }\r\n                 else {\r\n                     return [2 /*return*/, util.validateIndexedDBOpenable()\r\n                             .then(function () { return true; })\r\n                             .catch(function () { return false; })];\r\n                 }\r\n             });\r\n         });\r\n     };\r\n     /**\r\n      * Read all heartbeats.\r\n      */\r\n     HeartbeatStorageImpl.prototype.read = function () {\r\n         return tslib.__awaiter(this, void 0, void 0, function () {\r\n             var canUseIndexedDB, idbHeartbeatObject;\r\n             return tslib.__generator(this, function (_a) {\r\n                 switch (_a.label) {\r\n                     case 0: return [4 /*yield*/, this._canUseIndexedDBPromise];\r\n                     case 1:\r\n                         canUseIndexedDB = _a.sent();\r\n                         if (!!canUseIndexedDB) return [3 /*break*/, 2];\r\n                         return [2 /*return*/, { heartbeats: [] }];\r\n                     case 2: return [4 /*yield*/, readHeartbeatsFromIndexedDB(this.app)];\r\n                     case 3:\r\n                         idbHeartbeatObject = _a.sent();\r\n                         if (idbHeartbeatObject === null || idbHeartbeatObject === void 0 ? void 0 : idbHeartbeatObject.heartbeats) {\r\n                             return [2 /*return*/, idbHeartbeatObject];\r\n                         }\r\n                         else {\r\n                             return [2 /*return*/, { heartbeats: [] }];\r\n                         }\r\n                     case 4: return [2 /*return*/];\r\n                 }\r\n             });\r\n         });\r\n     };\r\n     // overwrite the storage with the provided heartbeats\r\n     HeartbeatStorageImpl.prototype.overwrite = function (heartbeatsObject) {\r\n         var _a;\r\n         return tslib.__awaiter(this, void 0, void 0, function () {\r\n             var canUseIndexedDB, existingHeartbeatsObject;\r\n             return tslib.__generator(this, function (_b) {\r\n                 switch (_b.label) {\r\n                     case 0: return [4 /*yield*/, this._canUseIndexedDBPromise];\r\n                     case 1:\r\n                         canUseIndexedDB = _b.sent();\r\n                         if (!!canUseIndexedDB) return [3 /*break*/, 2];\r\n                         return [2 /*return*/];\r\n                     case 2: return [4 /*yield*/, this.read()];\r\n                     case 3:\r\n                         existingHeartbeatsObject = _b.sent();\r\n                         return [2 /*return*/, writeHeartbeatsToIndexedDB(this.app, {\r\n                                 lastSentHeartbeatDate: (_a = heartbeatsObject.lastSentHeartbeatDate) !== null && _a !== void 0 ? _a : existingHeartbeatsObject.lastSentHeartbeatDate,\r\n                                 heartbeats: heartbeatsObject.heartbeats\r\n                             })];\r\n                 }\r\n             });\r\n         });\r\n     };\r\n     // add heartbeats\r\n     HeartbeatStorageImpl.prototype.add = function (heartbeatsObject) {\r\n         var _a;\r\n         return tslib.__awaiter(this, void 0, void 0, function () {\r\n             var canUseIndexedDB, existingHeartbeatsObject;\r\n             return tslib.__generator(this, function (_b) {\r\n                 switch (_b.label) {\r\n                     case 0: return [4 /*yield*/, this._canUseIndexedDBPromise];\r\n                     case 1:\r\n                         canUseIndexedDB = _b.sent();\r\n                         if (!!canUseIndexedDB) return [3 /*break*/, 2];\r\n                         return [2 /*return*/];\r\n                     case 2: return [4 /*yield*/, this.read()];\r\n                     case 3:\r\n                         existingHeartbeatsObject = _b.sent();\r\n                         return [2 /*return*/, writeHeartbeatsToIndexedDB(this.app, {\r\n                                 lastSentHeartbeatDate: (_a = heartbeatsObject.lastSentHeartbeatDate) !== null && _a !== void 0 ? _a : existingHeartbeatsObject.lastSentHeartbeatDate,\r\n                                 heartbeats: tslib.__spreadArray(tslib.__spreadArray([], tslib.__read(existingHeartbeatsObject.heartbeats), false), tslib.__read(heartbeatsObject.heartbeats), false)\r\n                             })];\r\n                 }\r\n             });\r\n         });\r\n     };\r\n     return HeartbeatStorageImpl;\r\n }());\r\n /**\r\n  * Calculate bytes of a HeartbeatsByUserAgent array after being wrapped\r\n  * in a platform logging header JSON object, stringified, and converted\r\n  * to base 64.\r\n  */\r\n function countBytes(heartbeatsCache) {\r\n     // base64 has a restricted set of characters, all of which should be 1 byte.\r\n     return util.base64urlEncodeWithoutPadding(\r\n     // heartbeatsCache wrapper properties\r\n     JSON.stringify({ version: 2, heartbeats: heartbeatsCache })).length;\r\n }\n\n /**\r\n  * @license\r\n  * Copyright 2019 Google LLC\r\n  *\r\n  * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n  * you may not use this file except in compliance with the License.\r\n  * You may obtain a copy of the License at\r\n  *\r\n  *   http://www.apache.org/licenses/LICENSE-2.0\r\n  *\r\n  * Unless required by applicable law or agreed to in writing, software\r\n  * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  * See the License for the specific language governing permissions and\r\n  * limitations under the License.\r\n  */\r\n function registerCoreComponents(variant) {\r\n     _registerComponent(new component.Component('platform-logger', function (container) { return new PlatformLoggerServiceImpl(container); }, \"PRIVATE\" /* ComponentType.PRIVATE */));\r\n     _registerComponent(new component.Component('heartbeat', function (container) { return new HeartbeatServiceImpl(container); }, \"PRIVATE\" /* ComponentType.PRIVATE */));\r\n     // Register `app` package.\r\n     registerVersion(name$p, version$1, variant);\r\n     // BUILD_TARGET will be replaced by values like esm5, esm2017, cjs5, etc during the compilation\r\n     registerVersion(name$p, version$1, 'cjs5');\r\n     // Register platform SDK identifier (no version).\r\n     registerVersion('fire-js', '');\r\n }\n\n /**\r\n  * Firebase App\r\n  *\r\n  * @remarks This package coordinates the communication between the different Firebase components\r\n  * @packageDocumentation\r\n  */\r\n registerCoreComponents('node');\n\n Object.defineProperty(exports, 'FirebaseError', {\n   enumerable: true,\n   get: function () { return util.FirebaseError; }\n });\n exports.SDK_VERSION = SDK_VERSION;\n exports._DEFAULT_ENTRY_NAME = DEFAULT_ENTRY_NAME;\n exports._addComponent = _addComponent;\n exports._addOrOverwriteComponent = _addOrOverwriteComponent;\n exports._apps = _apps;\n exports._clearComponents = _clearComponents;\n exports._components = _components;\n exports._getProvider = _getProvider;\n exports._isFirebaseApp = _isFirebaseApp;\n exports._isFirebaseServerApp = _isFirebaseServerApp;\n exports._registerComponent = _registerComponent;\n exports._removeServiceInstance = _removeServiceInstance;\n exports._serverApps = _serverApps;\n exports.deleteApp = deleteApp;\n exports.getApp = getApp;\n exports.getApps = getApps;\n exports.initializeApp = initializeApp;\n exports.initializeServerApp = initializeServerApp;\n exports.onLog = onLog;\n exports.registerVersion = registerVersion;\n exports.setLogLevel = setLogLevel;\n //# sourceMappingURL=index.cjs.js.map\n\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n___esModule = module.exports.__esModule;\n_FirebaseError = module.exports.FirebaseError;\n_SDK_VERSION = module.exports.SDK_VERSION;\n__DEFAULT_ENTRY_NAME = module.exports._DEFAULT_ENTRY_NAME;\n__addComponent = module.exports._addComponent;\n__addOrOverwriteComponent = module.exports._addOrOverwriteComponent;\n__apps = module.exports._apps;\n__clearComponents = module.exports._clearComponents;\n__components = module.exports._components;\n__getProvider = module.exports._getProvider;\n__isFirebaseApp = module.exports._isFirebaseApp;\n__isFirebaseServerApp = module.exports._isFirebaseServerApp;\n__registerComponent = module.exports._registerComponent;\n__removeServiceInstance = module.exports._removeServiceInstance;\n__serverApps = module.exports._serverApps;\n_deleteApp = module.exports.deleteApp;\n_getApp = module.exports.getApp;\n_getApps = module.exports.getApps;\n_initializeApp = module.exports.initializeApp;\n_initializeServerApp = module.exports.initializeServerApp;\n_onLog = module.exports.onLog;\n_registerVersion = module.exports.registerVersion;\n_setLogLevel = module.exports.setLogLevel;\n\n}, () => ({\n  '@firebase/component': _req,\n  'tslib': _req0,\n  '@firebase/logger': _req1,\n  '@firebase/util': _req2,\n  'idb': _req3,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}