{"version":3,"sources":["file:///Users/joan/Desktop/%E6%B8%85%E5%A4%A7/%E8%BB%9F%E9%AB%94%E5%AF%A6%E9%A9%97%E8%A8%AD%E8%A8%88/Boomboom-Frontier/assets/Scripts/MultiSelect.ts"],"names":["_decorator","Component","Node","Button","find","EditBox","Prefab","instantiate","Label","ccclass","property","MultiSelect","type","roomPosY","start","creatRoomButton","getComponent","node","on","EventType","MOUSE_UP","addRoom","roomRef","firebase","database","ref","once","snapshot","exists","roomList","val","room","roomNode","roomPrefab","getChildByName","string","roomName","setPosition","addChild","console","log","error","newRoom","set","users","isReady","userCnt","alert","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Button, find, director, log, EditBox, Prefab, instantiate, resources, Label } from 'cc';\n\nconst { ccclass, property } = _decorator;\n\n@ccclass('MultiSelect')\nexport class MultiSelect extends Component {\n\n    roomPosY: number = 100;\n    // roomHeight: number = 100;\n\n    @property({ type: EditBox })\n    roomName: EditBox = null;\n\n    @property({ type: Prefab })\n    roomPrefab: Prefab = null;\n\n    start() {\n        let creatRoomButton = find(\"Canvas/creatRoom\").getComponent(Button);\n\n        creatRoomButton.node.on(Node.EventType.MOUSE_UP, this.addRoom, this);\n        const roomRef = firebase.database().ref('rooms/')\n        roomRef.once('value', (snapshot) => {\n            if (snapshot.exists()) {\n                const roomList = snapshot.val();\n                for(let room in roomList) {\n                    const roomNode = instantiate(this.roomPrefab);\n                    roomNode.getChildByName(\"Label\").getComponent(Label).string = roomList[room].roomName;\n                    roomNode.setPosition(0, this.roomPosY, 0);\n                    this.roomPosY -= 150;\n                    find(\"Canvas/Rooms\").addChild(roomNode);\n                }\n            } else {\n                console.log(\"No rooms found.\");\n            }\n        }, (error) => {\n            console.error(\"Failed to fetch room list: \", error);\n        });\n    }\n\n    async addRoom() {\n        try {\n            if (this.roomName.string) {\n                const newRoom = await firebase.database().ref('rooms/' + this.roomName.string);\n                await newRoom.set({\n                    roomName: this.roomName.string,\n                    users: [],\n                    isReady: false,\n                    userCnt: 1\n                });\n                const roomNode = instantiate(this.roomPrefab);\n                console.log(roomNode);\n                roomNode.getChildByName(\"Label\").getComponent(Label).string = this.roomName.string;\n                roomNode.setPosition(0, this.roomPosY, 0);\n                this.roomPosY -= 150;\n\n                find(\"Canvas/Rooms\").addChild(roomNode);\n                this.roomName.string = \"\";\n                alert(\"Room created successfully\");\n            }\n        }\n        catch (error) {\n            console.log(error);\n        }\n    }\n\n    update(deltaTime: number) {\n\n    }\n}\n\n"]}